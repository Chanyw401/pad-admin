(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6486728f"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"841c":function(t,e,a){"use strict";var s=a("d784"),o=a("825a"),i=a("1d80"),l=a("129f"),n=a("14c3");s("search",1,(function(t,e,a){return[function(e){var a=i(this),s=void 0==e?void 0:e[t];return void 0!==s?s.call(e,a):new RegExp(e)[t](String(a))},function(t){var s=a(e,t,this);if(s.done)return s.value;var i=o(t),r=String(this),u=i.lastIndex;l(u,0)||(i.lastIndex=0);var d=n(i,r);return l(i.lastIndex,u)||(i.lastIndex=u),null===d?-1:d.index}]}))},b74e:function(t,e,a){"use strict";a("bf5a")},bf5a:function(t,e,a){},c73c:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-page"},[a("div",{staticClass:"table-box"},[a("div",{staticClass:"table-box-head"},[a("div",{staticClass:"table-box-operate"},[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v(" 新增 "),a("i",{staticClass:"btn-icon btn-icon-new-white el-icon--right"})]),a("el-button",{on:{click:t.delBatch}},[t._v(" 批量删除 "),a("i",{staticClass:"btn-icon btn-icon-delete el-icon--right"})])],1),a("div",{staticClass:"table-box-title"},[t._v("用户列表")])]),a("el-table",{ref:"table",attrs:{data:t.tableObj.list,stripe:""}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"loginName",label:"账号",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"账号名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.userName?e.row.userName:"——")+" ")]}}])}),a("el-table-column",{attrs:{width:"160px",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"btn-icon btn-icon-edit",attrs:{title:"编辑"},on:{click:function(a){return t.edit(e.row)}}}),a("i",{staticClass:"btn-icon btn-icon-delete",attrs:{title:"删除"},on:{click:function(a){return t.del([e.row.id])}}})]}}])})],1),a("table-page",{attrs:{"current-page":t.searchData.pageNum,"page-size":t.searchData.pageSize,total:t.tableObj.total,change:t.search},on:{"update:currentPage":function(e){return t.$set(t.searchData,"pageNum",e)},"update:current-page":function(e){return t.$set(t.searchData,"pageNum",e)},"update:pageSize":function(e){return t.$set(t.searchData,"pageSize",e)},"update:page-size":function(e){return t.$set(t.searchData,"pageSize",e)}}})],1),a("el-dialog",{attrs:{title:t.uploadBox.title,visible:t.uploadBox.show,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){return t.$set(t.uploadBox,"show",e)},opened:t.opened}},[a("el-form",{ref:"uploadBox",attrs:{model:t.uploadBox.data,rules:t.uploadBox.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"账号名称：",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"100","show-word-limit":""},model:{value:t.uploadBox.data.userName,callback:function(e){t.$set(t.uploadBox.data,"userName","string"===typeof e?e.trim():e)},expression:"uploadBox.data.userName"}})],1),a("el-form-item",{attrs:{label:"账号：",prop:"loginName"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:"100","show-word-limit":""},model:{value:t.uploadBox.data.loginName,callback:function(e){t.$set(t.uploadBox.data,"loginName","string"===typeof e?e.trim():e)},expression:"uploadBox.data.loginName"}})],1),a("el-form-item",{attrs:{label:"账号密码：",prop:"passWord"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.uploadBox.data.passWord,callback:function(e){t.$set(t.uploadBox.data,"passWord","string"===typeof e?e.trim():e)},expression:"uploadBox.data.passWord"}})],1)],1),a("div",{staticClass:"tx-center"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitUpload}},[t._v("确定")]),a("el-button",{on:{click:function(e){t.uploadBox.show=!1}}},[t._v("取消")])],1)],1)],1)},o=[],i=(a("4160"),a("ac1f"),a("841c"),a("159b"),a("5530")),l=a("2f62"),n={name:"UserManage",computed:Object(i["a"])({},Object(l["mapGetters"])(["userType"])),data:function(){return{searchData:{name:"",loginName:"",status:"",type:"",pageNum:1,pageSize:10},tableObj:{total:0,list:[]},uploadBox:{show:!1,title:"编辑",data:{id:void 0,loginName:"",passWord:"",status:"1",userName:"",userType:""},rules:{loginName:[{required:!0,message:"账号不能为空！",trigger:"blur"}],passWord:[{required:!0,message:"账号密码不能为空！",trigger:"blur"}],userName:[{required:!0,message:"账号名称不能为空！",trigger:"blur"}]}},roleType:0}},created:function(){this.search()},methods:{opened:function(){this.$refs.uploadBox.clearValidate()},userStatus:function(t,e){var a=this;this.$axios.post("/admin/user/disable-enabled",{id:t,status:e},{loading:!0}).then((function(){a.$tool.msg({type:"success",message:e?"启用成功！":"禁用成功！"}),a.search()}))},search:function(t){var e=this;"search"==t&&(this.searchData.pageNum=1),this.$axios.post("/admin/user/page",this.searchData,{loading:!0}).then((function(t){e.tableObj.list=t.list||[],e.tableObj.total=t.total}))},submitUpload:function(){var t=this;this.$refs.uploadBox.validate((function(e,a){if(!e){var s;for(var o in a){s=a[o];break}return t.$tool.msg({type:"error",message:s[0].message}),!1}var i="/admin/user/add";void 0!=t.uploadBox.data.id&&(i="/admin/user/update"),t.$axios.post(i,t.uploadBox.data,{loading:!0}).then((function(){t.uploadBox.show=!1,t.uploadBox.data.id||(t.searchData.pageNum=1),t.search(),t.$tool.msg({type:"success",message:t.uploadBox.data.id?"修改成功":"新增成功"})}))}))},reset:function(){this.searchData.pageNum=1,this.searchData.loginName="",this.searchData.userName="",this.searchData.userType="",this.searchData.status="",this.search()},add:function(){this.uploadBox.title="新增用户",this.uploadBox.show=!0,this.uploadBox.data.id=void 0,Object.assign(this.uploadBox.data,this.$options.data().uploadBox.data)},edit:function(t){for(var e in this.uploadBox.title="编辑用户",this.uploadBox.show=!0,this.uploadBox.data.id=t.id,this.uploadBox.data)this.uploadBox.data[e]=t[e]},delBatch:function(){var t=this.$refs.table.selection,e=[],a="";t.forEach((function(t){1==t.userType&&(a="超级管理员不可删除！"),e.push(t.id)})),a?this.$tool.msg({type:"error",message:a}):this.del(e)},del:function(t){var e=this;t.length?this.$tool.confirm().then((function(){e.$axios.post("/admin/user/del",{ids:t},{loading:!0}).then((function(){e.search(),e.$tool.msg({type:"success",message:"删除成功"})}))})):this.$tool.msg({type:"warning",message:"请选择一条或多条数据！"})}}},r=n,u=(a("b74e"),a("2877")),d=Object(u["a"])(r,s,o,!1,null,"e42c0eec",null);e["default"]=d.exports}}]);